<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ck.dao.IHuiyuanDao">

    <resultMap id="queryAll" type="com.ck.entity.Huiyuan">
        <result property="h_id" column="h_id"/>
        <association property="huiyuaninfo" column="h_id" select="com.ck.dao.IHuiyuaninfoDao.queryhinfobyid"/>
    </resultMap>
<select id="queryHuiyuanAll" resultMap="queryAll">
    select * from t_huiyuan h join t_huiyuan_info i on h.h_id=i.hi_id where h.h_status=1
        <if test="datemin!=null and datemin!=''">
            and h.h_time>=to_date(#{datemin},'yyyy-mm-dd')
        </if>
        <if test="datemax!=null and datemax!=''">
            and h.h_time<![CDATA[<]]>=to_date(#{datemax},'yyyy-mm-dd')
        </if>
        <if test="manyinfo!=null and manyinfo!=''">
            and h.h_name=#{manyinfo} or i.hi_phone=#{manyinfo} or i.hi_email=#{manyinfo}
        </if>
</select>



</mapper>
